#!/usr/bin/env bash

set -e

if [[ $DEAMONIZE ]]; then
  DEAMONIZE_OPT="-d"
fi

if [[ $VNC ]]; then
  VNC_OPT="-p 7901:7900"
fi

docker run \
  $DEAMONIZE_OPT \
  $VNC_OPT \
  -p ${SELENIUM_FIREFOX_PORT:-4444}:4444 \
  --name=$DOCKER_CONTAINER_NAME \
  --hostname=selenium-firefox \
  --add-host host.docker.internal:host-gateway \
  --shm-size=2g \
  --env SE_SCREEN_WIDTH=1920 \
  --env SE_SCREEN_HEIGHT=1080 \
  --env SE_SCREEN_DEPTH=24 \
  --env VNC_NO_PASSWORD=1 \
  --rm \
  selenium/standalone-firefox:97.0-geckodriver-0.30-20220217
